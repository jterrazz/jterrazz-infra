---
# Infrastructure Dashboard ConfigMap with HTML content
apiVersion: v1
kind: ConfigMap
metadata:
  name: infra-dashboard-page
  namespace: default
data:
  index.html: |
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <title>Infrastructure</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Local development infrastructure">
        <style>
            :root {
                --background: #ffffff;
                --foreground: #0a0a0a;
                --card: #ffffff;
                --card-foreground: #0a0a0a;
                --muted: #f4f4f5;
                --muted-foreground: #71717a;
                --border: #e4e4e7;
                --radius: 0.5rem;
                --accent: #000000;
            }
            
            @media (prefers-color-scheme: dark) {
                :root {
                    --background: #0a0a0a;
                    --foreground: #fafafa;
                    --card: #0a0a0a;
                    --card-foreground: #fafafa;
                    --muted: #18181b;
                    --muted-foreground: #a1a1aa;
                    --border: #27272a;
                    --accent: #ffffff;
                }
            }
            
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
            body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Inter", sans-serif;
                background: var(--background);
                color: var(--foreground);
                min-height: 100vh;
                line-height: 1.6;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            
            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 2rem;
            }
            
            header {
                margin-bottom: 4rem;
            }
            
            h1 {
                font-size: 2rem;
                font-weight: 600;
                letter-spacing: -0.025em;
                margin-bottom: 0.5rem;
            }
            
            .subtitle {
                color: var(--muted-foreground);
                font-size: 1rem;
            }
            
            .services-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
                gap: 1.5rem;
                margin-bottom: 4rem;
            }
            
            .service-card {
                background: var(--card);
                border: 1px solid var(--border);
                border-radius: var(--radius);
                padding: 1.5rem;
                transition: all 0.2s ease;
                position: relative;
                overflow: hidden;
            }
            
            .service-card:hover {
                border-color: var(--muted-foreground);
                transform: translateY(-2px);
            }
            
            .service-header {
                display: flex;
                align-items: center;
                gap: 0.75rem;
                margin-bottom: 0.75rem;
            }
            
            .service-icon {
                width: 40px;
                height: 40px;
                background: var(--muted);
                border-radius: var(--radius);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.25rem;
            }
            
            .service-title {
                font-size: 1.125rem;
                font-weight: 600;
                letter-spacing: -0.025em;
            }
            
            .service-description {
                color: var(--muted-foreground);
                font-size: 0.875rem;
                margin-bottom: 1rem;
            }
            
            .service-link {
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                color: var(--foreground);
                text-decoration: none;
                font-size: 0.875rem;
                font-weight: 500;
                transition: opacity 0.2s;
            }
            
            .service-link:hover {
                opacity: 0.7;
            }
            
            .service-link svg {
                width: 16px;
                height: 16px;
                transition: transform 0.2s;
            }
            
            .service-link:hover svg {
                transform: translateX(2px);
            }
            
            .status-bar {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                margin-bottom: 3rem;
                padding: 0.75rem 1rem;
                background: var(--muted);
                border-radius: var(--radius);
                font-size: 0.875rem;
            }
            
            .status-indicator {
                width: 8px;
                height: 8px;
                background: #10b981;
                border-radius: 50%;
                animation: pulse 2s ease-in-out infinite;
            }
            
            @keyframes pulse {
                0% { opacity: 1; }
                50% { opacity: 0.5; }
                100% { opacity: 1; }
            }
            
            footer {
                border-top: 1px solid var(--border);
                padding-top: 2rem;
                color: var(--muted-foreground);
                font-size: 0.875rem;
            }
            
            .footer-content {
                display: flex;
                flex-wrap: wrap;
                gap: 2rem;
                justify-content: space-between;
            }
            
            .tech-stack {
                display: flex;
                gap: 1rem;
                flex-wrap: wrap;
            }
            
            .tech-item {
                padding: 0.25rem 0.75rem;
                background: var(--muted);
                border-radius: 9999px;
                font-size: 0.75rem;
                font-weight: 500;
            }
            
            @media (max-width: 768px) {
                .container {
                    padding: 1.5rem;
                }
                
                .services-grid {
                    grid-template-columns: 1fr;
                }
                
                h1 {
                    font-size: 1.75rem;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <header>
                <h1>Infrastructure</h1>
                <p class="subtitle">Local development environment</p>
            </header>
            
            <div class="status-bar">
                <div class="status-indicator"></div>
                <span>All systems operational</span>
            </div>
            
            <main class="services-grid">
                <div class="service-card">
                    <div class="service-header">
                        <div class="service-icon">üîÑ</div>
                        <h2 class="service-title">ArgoCD</h2>
                    </div>
                    <p class="service-description">
                        GitOps continuous deployment platform for declarative Kubernetes applications.
                    </p>
                    <a href="https://argocd.local" class="service-link">
                        Open ArgoCD
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M7 17L17 7"/>
                            <path d="M7 7h10v10"/>
                        </svg>
                    </a>
                </div>
                
                <div class="service-card">
                    <div class="service-header">
                        <div class="service-icon">üê≥</div>
                        <h2 class="service-title">Portainer</h2>
                    </div>
                    <p class="service-description">
                        Kubernetes management dashboard for container orchestration and monitoring.
                    </p>
                    <a href="https://portainer.local" class="service-link">
                        Open Portainer
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M7 17L17 7"/>
                            <path d="M7 7h10v10"/>
                        </svg>
                    </a>
                </div>
                
                <div class="service-card">
                    <div class="service-header">
                        <div class="service-icon">üìä</div>
                        <h2 class="service-title">Grafana</h2>
                    </div>
                    <p class="service-description">
                        Analytics and interactive visualization platform for metrics and logs.
                    </p>
                    <a href="#" class="service-link" style="opacity: 0.5; cursor: not-allowed;">
                        Coming soon
                    </a>
                </div>
                
                <div class="service-card">
                    <div class="service-header">
                        <div class="service-icon">üîç</div>
                        <h2 class="service-title">Prometheus</h2>
                    </div>
                    <p class="service-description">
                        Systems monitoring and alerting toolkit for reliability and scalability.
                    </p>
                    <a href="#" class="service-link" style="opacity: 0.5; cursor: not-allowed;">
                        Coming soon
                    </a>
                </div>
            </main>
            
            <footer>
                <div class="footer-content">
                    <div>
                        <strong>Environment:</strong> Local Development
                    </div>
                    <div class="tech-stack">
                        <span class="tech-item">k3s</span>
                        <span class="tech-item">ArgoCD</span>
                        <span class="tech-item">Traefik</span>
                        <span class="tech-item">Local SSL</span>
                    </div>
                </div>
            </footer>
        </div>
    </body>
    </html>

---
# Infrastructure Dashboard for Local Development
apiVersion: apps/v1
kind: Deployment
metadata:
  name: infra-dashboard
  namespace: default
  labels:
    app: infra-dashboard
spec:
  replicas: 1
  selector:
    matchLabels:
      app: infra-dashboard
  template:
    metadata:
      labels:
        app: infra-dashboard
    spec:
      containers:
        - name: infra-dashboard
          image: nginx:alpine
          ports:
            - containerPort: 80
          resources:
            requests:
              memory: "32Mi"
              cpu: "50m"
            limits:
              memory: "64Mi"
              cpu: "100m"
          volumeMounts:
            - name: infra-dashboard-content
              mountPath: /usr/share/nginx/html
      volumes:
        - name: infra-dashboard-content
          configMap:
            name: infra-dashboard-page

---
# Service for Infrastructure Dashboard
apiVersion: v1
kind: Service
metadata:
  name: infra-service
  namespace: default
  labels:
    app: infra-dashboard
spec:
  selector:
    app: infra-dashboard
  ports:
    - port: 80
      targetPort: 80
      protocol: TCP
  type: ClusterIP
