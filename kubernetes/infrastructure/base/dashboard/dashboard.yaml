---
# Infrastructure Dashboard
# Simple landing page with links to management tools

apiVersion: v1
kind: ConfigMap
metadata:
  name: dashboard-config
  namespace: platform-management
data:
  index.html: |
    <!DOCTYPE html>
    <html>
    <head>
      <title>Infrastructure</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: system-ui, sans-serif; background: #111; color: #fff; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        .container { text-align: center; padding: 2rem; }
        h1 { font-size: 2rem; margin-bottom: 2rem; font-weight: 400; }
        .links { display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center; }
        a { color: #fff; background: #222; padding: 1rem 2rem; border-radius: 8px; text-decoration: none; transition: background 0.2s; }
        a:hover { background: #333; }
      </style>
    </head>
    <body>
      <div class="container">
        <h1>Infrastructure Dashboard</h1>
        <div class="links">
          <a href="https://argocd.jterrazz.com">ArgoCD</a>
          <a href="https://portainer.jterrazz.com">Portainer</a>
        </div>
      </div>
    </body>
    </html>

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: dashboard
  namespace: platform-management
  labels:
    app.kubernetes.io/name: dashboard
    app.kubernetes.io/component: ui
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: dashboard
  template:
    metadata:
      labels:
        app.kubernetes.io/name: dashboard
    spec:
      containers:
        - name: nginx
          image: nginx:alpine
          ports:
            - containerPort: 80
          resources:
            requests:
              cpu: 10m
              memory: 16Mi
            limits:
              cpu: 50m
              memory: 32Mi
          volumeMounts:
            - name: html
              mountPath: /usr/share/nginx/html
              readOnly: true
          securityContext:
            readOnlyRootFilesystem: false
            allowPrivilegeEscalation: false
      volumes:
        - name: html
          configMap:
            name: dashboard-config

---
apiVersion: v1
kind: Service
metadata:
  name: dashboard
  namespace: platform-management
  labels:
    app.kubernetes.io/name: dashboard
spec:
  selector:
    app.kubernetes.io/name: dashboard
  ports:
    - port: 80
      targetPort: 80
