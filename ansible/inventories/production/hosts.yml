# Production Inventory
# Points to actual VPS deployed via Terraform

all:
  children:
    k3s_cluster:
      hosts:
        jterrazz-vps:
          # This will be populated by Terraform output
          # Or manually set your VPS details:
          ansible_host: "{{ hostvars['localhost']['server_ip'] | default('YOUR_VPS_IP') }}"
          ansible_user: ubuntu
          ansible_ssh_private_key_file: ~/.ssh/hetzner-key
          ansible_ssh_common_args: '-o StrictHostKeyChecking=no'

          # Production environment flags
          is_production_environment: true
          environment_type: "production"

          # Security settings (strict for production)
          skip_tailscale: false       # Enable Tailscale in production
          skip_security: false       # Enable full security hardening
          skip_ufw_strict: false     # Enable strict firewall rules
          skip_ssh_hardening: false  # Enable SSH hardening

          # k3s configuration for production
          k3s_server: true
          k3s_node_ip: "{{ ansible_default_ipv4.address }}"
          k3s_flannel_interface: "eth0"

          # SSL configuration (real certificates)
          use_self_signed_certs: false
          ssl_provider: "letsencrypt"
          domain_name: "{{ vault_domain_name | default('jterrazz.com') }}"

  vars:
    # Global variables for production environment
    ansible_python_interpreter: /usr/bin/python3

    # Environment markers
    environment_type: "production"
    deployment_method: "terraform"

    # Security settings (strict for production)
    security_level: "production"
    enable_audit_logging: true
    enable_fail2ban: true
    enable_ufw_strict: true

    # k3s settings
    k3s_version: v1.28.5+k3s1

    # Production networking
    cluster_cidr: "10.42.0.0/16"
    service_cidr: "10.43.0.0/16"

    # Portainer settings
    portainer_enabled: true
    portainer_namespace: "portainer"

    # DNS settings for production
    use_real_dns: true
    enable_external_dns: true
